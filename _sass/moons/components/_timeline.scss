/*------------------------------------*\
    ::Timeline
\*------------------------------------*/

/*------------------------------------*\
    ::Common Vars
\*------------------------------------*/
$timeline-width:            3em; // timeline bar's width
$timeline-gaps:             8em; // each year period's height
$timeline-border-width:     .1875em; // all timeline borders
$year-word-height:          .85em; // the height of the "20xx" word for centering

/*------------------------------------*\
    ::Year Position Mixin
\*------------------------------------*/
// Usage:
// .el {
//     @include year(2010, 2015); // spans 2010 to 2015
//     @include year(false, 2015); // starts at 2015 with auto height
//     @include year(false, 2015.5); // starts at Jul 2, 2015 with auto height
// }
@mixin year($start-year, $end-year, $total-years: 2016) {
    top: ($total-years - $end-year + 1) * $timeline-gaps + $year-word-height;
    @if $start-year != false {
        height: ($end-year - $start-year) * $timeline-gaps;
    }
}
.timeline {
    @include clearfix;
    position: relative;
    margin-top: 100vh;
    float: left;
    width: 100%;
    &:before,
    &:after {
        content: "";
        display: block;
        position: absolute;
        top: 0;
        bottom: 0;
    }
    &:before {
        left: 0;
        background-image: linear-gradient(
            180deg,
            transparent,
            rgba($color-bg--dark,.85) 5em
        );
        width: 33.33%;
        @include bp($solarsystem){
            width: 50%;
        }
    }
    &:after {
        right: 0;
        background-image: linear-gradient(
            180deg,
            transparent,
            rgba($color-bg--light,.94) 5em
        );
        width: 66.66%;
        @include bp($solarsystem){
            width: 50%;
        }
    }
    &__col {
        position: relative;
        z-index: 10;
        float: left;
        width: 33.33%;
        padding: 0 $gap;
        @include bp($solarsystem){
            width: 50%;
        }
        @include bp($planetary){
            width: 100%;
        }
    }
}
// .detail { // left col
//      uncomment if it's needed :-)
// }
.exp,
.achieve {
    h1, h2, h3, h5, h6 {
        color: $color-1-dark;
    }
    h3 + h4 {
        margin-top: -.4em;
        margin-bottom: .4em;
    }
}
.exp { // center col
    @include clearfix();
    position: relative;
    padding-right: 0;
    font-size: 1.2vw;
    @include bp($solarsystem){
        font-size: 1rem;
    }
    &__group {
        position: absolute;
        left: 0;
        right: $timeline-width;
        padding: 0 $gap;
        &--title {
            &:before,
            &:after {
                display: none;
            }
        }
        &--zenman {
            @include year(2012, 2016);
        }
        &--du {
            @include year(2010, 2012);
        }
        &--usmc {
            @include year(2006, 2010);
        }
        &--tech {
            @include year(2002, 2006);
        }
        &:before,
        &:after { // circle/line for exp
            content: "";
            position: absolute;
            border: $timeline-border-width solid $color-2;
            z-index: 10;
        }
        &:before { // line for exp
            left: 0;
            right: 0;
            bottom: 0;
            border-width: $timeline-border-width 0 0;
        }
        &:after { // circle for exp
            right: -$timeline-border-width*.5;
            bottom: $timeline-border-width*.4;
            width: 1em;
            height: 1em;
            border-radius: 50%;
            background-color: $color-bg--light;
            transform: translate(50%, 50%);
        }
    }
    &__timeline {
        float: right;
        width: $timeline-width;
        border: 0 solid $color-2;
        border-width: 0 $timeline-border-width;
        margin: 0;
        padding: 0;
    }
    &__year {
        position: relative;
        display: block;
        text-align: center;
        width: 100%;
        height: $timeline-gaps;
        margin: 0;
        padding-left: 0;
        span {
            font-size: .75em;
        }
        &:before,
        &:after {
            content: "";
            position: absolute;
            border: 0 solid $color-2;
            border-width: $timeline-border-width 0 0;
            width: .4em;
            height: 0;
            top: .7em;
            border-radius: 0;
        }
        &:before {
            left: 0;
        }
        &:after {
            right: 0;
        }
    }
}
.achieve { // right col
    position: absolute;
    right: 0;
    top: 0;
    bottom: 0;
    font-size: 1.2vw;
    @include bp($solarsystem){
        font-size: 1rem;
    }
    @include bp($solarsystem){
        position: relative;
        width: 100%;
    }
    &__group {
        position: absolute;
        left: 0;
        right: 0;
        padding: 0 $gap 0 3em;
        transform: translateY(-50%);
        &--title {
            transform: none;
            &:before,
            &:after {
                display: none;
            }
            @include bp($solarsystem){
                border-top: $timeline-border-width solid $color-2;
            }
        }
        &--zen-principle {
            @include year(false, 2016);
        }
        &--zen-lead {
            @include year(false, 2015);
        }
        &--zen-senior {
            @include year(false, 2014);
        }
        &--du-4 {
            @include year(false, 2012);
        }
        &--usmc-good-cookie {
            @include year(false, 2009);
        }
        &--usmc-commendation {
            @include year(false, 2007);
        }
        &--tech-4 {
            @include year(false, 2006);
        }
        &--tech-achievement {
            @include year(false, 2005.65);
        }
        @include bp($solarsystem){
            position: relative;
            top: 0;
            margin-bottom: $gap;
            margin-left: 50%;
            padding: 0 $gap;
            transform: none;
        }
        &:before,
        &:after { // line/circle for achieve
            content: "";
            position: absolute;
            border: $timeline-border-width solid $color-2;
            z-index: 10;
        }
        &:before { // line for achieve
            left: 0;
            width: 2em;
            top: 50%;
            border-width: $timeline-border-width 0 0;
            transform: translateY(-100%);
            @include bp($solarsystem){
                display: none;
            }
        }
        &:after { // circle for achieve
            left: -.1em;
            top: calc(50% - .1em);
            width: 1em;
            height: 1em;
            border-radius: 50%;
            background-color: $color-bg--light;
            transform: translate(-50%, -50%);
            @include bp($solarsystem){
                position: absolute;
                top: .4em;
                left: $gap;
                width: .5em;
                height: .5em;
                border: .15em solid $color-2;
                border-radius: 50%;
                transform: none;
            }
        }
        p {
            @include bp($solarsystem){
                padding: 0 $gap;
            }
        }
    }
}
